<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>hello world</title>
    </head>
    <body>
        <p>
            <h1>
                hello {{name}}
            </h1>
            <h3 id="return">
            </h3>
        </p>
        <form method="post">
            <input name='a' />
            <input name='b' />
            <input type='submit'/>
        </form>
        <button id="test">Test</button>
        <button id="list">List</button>
        <button id="lists">额外用户List</button>
        <button id="create">Insert</button>
        <label>开始时间</label>
        <input id="start" />
        <label>用户id</label>
        <input id="user_id" />
        <button id="new">伪造数据</button>
        <label>要清空的用户id</label>
        <input id="user_idc" />
        <button id="clear">清空数据</button>
        <div id="list1"></div>
    </body>
    <script src="/static/js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8">
        var HelloWorldAPI = 10001;
        var CalendarAPI = {
            list: 10002,
            create: 10003,
        };
        $(document).ready(function(){
            $('#test').click(function(){
                $.ajax({
                    method: 'post',
                    headers: {'api_id': HelloWorldAPI},
                    data: JSON.stringify({'haha': 'haha', 'a': 'b'}),
                    success: function (res) {
                        console.log(res);
                        $("#return").html(JSON.stringify(res));
                    }
                })
            })
            $('#list').click(function(){
                $.ajax({
                    method: 'post',
                    headers: {'api_id': CalendarAPI.list},
                    data: {'user_id': 1},
                    success: function (res) {
                        $("#list1").html(JSON.stringify(res));
                        console.log(res);
                    }
                })
            })
            $('#lists').click(function(){
                $.ajax({
                    method: 'post',
                    headers: {'api_id': CalendarAPI.list},
                    data: JSON.stringify({'user_id': 1, 'participant':[2, 3, 4, 5]}),
                    success: function (res) {
                        $("#list1").html(JSON.stringify(res));
                        console.log(res);
                    }
                })
            })
            $('#create').click(function(){
                var start = new Date();
                start = start.getTime()/1000;
                var end = start + 3600;
                $.ajax({
                    method: 'post',
                    headers: {'api_id': CalendarAPI.create},
                    data: {'user_id': 1, start: start, end: end, event: "明天吃早饭"},
                    success: function (res) {
                        console.log(res);
                    }
                })
            })

            $('#new').click(function(){
                var user_id = parseInt($("#user_id").val());
                var time_div = parseInt($("#start").val());
                var start = new Date();
                start = start.getTime()/1000 - time_div;
                var end = start + 3600;
                $.ajax({
                    method: 'post',
                    headers: {'api_id': 10},
                    data: {'user_id': user_id, start: start, end: end, event: "明天吃早饭"},
                    success: function (res) {
                        console.log(res);
                    }
                })
            })

            $('#clear').click(function(){
                var user_id = parseInt($("#user_idc").val());
                $.ajax({
                    method: 'post',
                    headers: {'api_id': 11},
                    data: {'user_id': user_id},
                    success: function (res) {
                        console.log(res);
                    }
                })
            })
        })
    </script>
</html>
